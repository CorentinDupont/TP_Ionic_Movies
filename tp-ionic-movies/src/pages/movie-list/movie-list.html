<!--
  Generated template for the MovieListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar class="custom-header">
    <ion-title>
        Tous les films
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

<p>{{hasInternetConnection()}}</p>

  <!-- Search bar block -->
  <div class="search-bar-block">
    <ion-searchbar (keyup)="onKey($event)"></ion-searchbar>
    <button ion-button clear icon-only (click)="scanCode()">
      <ion-icon name="qr-scanner" color="primary"></ion-icon>
    </button>
  </div>
  
  <!-- To much movies found block -->
  <span *ngIf="movieGetter.moviesList.length == 0">
    <ion-card>
      <ion-card-title>Error</ion-card-title>
      <ion-card-content>
        <p>
         Il y a trop de films, veuillez affiner votre recherche
        </p>
      </ion-card-content>
    </ion-card>
  </span>

  <!-- Movies grid -->
  <ion-grid>
    <ion-row>
      <ion-col col-6 *ngFor="let movie of movieGetter.moviesList" class="movie-column">
        <ion-card (click)="showMovie(movie)" class="movie-card">
          <img src={{movie.poster}}/>
          <ion-card-content>
            <p class="card-title">
              {{movie.title}}
              </p>
            <p>
              <span *ngIf="movie.genre">{{movie.genre | getFirstGenre }} - </span>
              {{movie.year}}
            </p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>


  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" >
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more movies..."></ion-infinite-scroll-content>
 </ion-infinite-scroll>
</ion-content>
